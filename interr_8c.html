<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Jukebox Project: port/stm32f4/src/interr.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Jukebox Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('interr_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">interr.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interrupt service routines for the STM32F4 platform.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="port__system_8h.html">port_system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="port__button_8h.html">port_button.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="port__usart_8h.html">port_usart.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="port__buzzer_8h.html">port_buzzer.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab5e09814056d617c521549e542639b7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interr_8c.html#ab5e09814056d617c521549e542639b7e">SysTick_Handler</a> (void)</td></tr>
<tr class="memdesc:ab5e09814056d617c521549e542639b7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt service routine for the System tick timer (SysTick).  <a href="interr_8c.html#ab5e09814056d617c521549e542639b7e">More...</a><br /></td></tr>
<tr class="separator:ab5e09814056d617c521549e542639b7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a738473a5b43f6c92b80ce1d3d6f77ed9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interr_8c.html#a738473a5b43f6c92b80ce1d3d6f77ed9">EXTI15_10_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a738473a5b43f6c92b80ce1d3d6f77ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles Px10-Px15 global interrupts.  <a href="interr_8c.html#a738473a5b43f6c92b80ce1d3d6f77ed9">More...</a><br /></td></tr>
<tr class="separator:a738473a5b43f6c92b80ce1d3d6f77ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d108a3468b2051548183ee5ca2158a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interr_8c.html#a0d108a3468b2051548183ee5ca2158a0">USART3_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a0d108a3468b2051548183ee5ca2158a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles USART3 global interrupt.  <a href="interr_8c.html#a0d108a3468b2051548183ee5ca2158a0">More...</a><br /></td></tr>
<tr class="separator:a0d108a3468b2051548183ee5ca2158a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ad4725462bdc5e86c4ead4f04b9fc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interr_8c.html#a38ad4725462bdc5e86c4ead4f04b9fc2">TIM2_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a38ad4725462bdc5e86c4ead4f04b9fc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles TIM2 global interrupt.  <a href="interr_8c.html#a38ad4725462bdc5e86c4ead4f04b9fc2">More...</a><br /></td></tr>
<tr class="separator:a38ad4725462bdc5e86c4ead4f04b9fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interrupt service routines for the STM32F4 platform. </p>
<dl class="section author"><dt>Author</dt><dd>Sistemas Digitales II </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-01-01 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a738473a5b43f6c92b80ce1d3d6f77ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a738473a5b43f6c92b80ce1d3d6f77ed9">&#9670;&nbsp;</a></span>EXTI15_10_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EXTI15_10_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function handles Px10-Px15 global interrupts. </p>
<p>First, this function identifies the line/ pin which has raised the interruption. Then, perform the desired action. Before leaving it cleans the interrupt pending register.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos Version 1</b></p>
<p>âœ… 1. Read the value of the GPIO of the user button. Use the <a class="el" href="port__button_8h.html#a20004e90fe8f26300e72e57dc2599db7">BUTTON_0_ID</a> index to get the port and pin from the <code>buttons_arr</code> <br  />
âœ… 2. If the value is <a class="el" href="port__system_8h.html#a5bb885982ff66a2e0a0a45a8ee9c35e2">HIGH</a> means that the button as been released, therefore set the field <code>flag_pressed</code> to <code>false</code> <br  />
âœ… 3. If the value is <a class="el" href="port__system_8h.html#ab811d8c6ff3a505312d3276590444289">LOW</a> means that the button as been pressed, therefore set the field <code>flag_pressed</code> to <code>true</code> <br  />
âœ… 4. Clean the corresponding bit of the <code>PR</code> register <br  />
&#160;&#160;&#160;&#160;ðŸ’¡ Recommendation: use the macro <a class="el" href="port__system_8h.html#ad8e7767483a0c8f878cab29ad46ec656">BIT_POS_TO_MASK</a> <br  />
&#160;&#160;&#160;&#160;ðŸ’¡ <b>To clean an interrupt in the <em>Pending Register</em> (<code>PR</code>) we must write '1' in the corresponding bit</b>. <em>Look at the example in section "Ejemplo de interrupciÃ³n externa" of the reference book.</em> You can also find this out by consulting the <em>reference manual</em> <a href="https://www.st.com/resource/en/reference_manual/rm0390-stm32f446xx-advanced-armbased-32bit-mcus-stmicroelectronics.pdf">STM32F446xx Advanced ARM-based 32-bit MCUs</a> (See section "10.3.6 Pending register (EXTI_PR)") <br  />
</p>
</blockquote>
<blockquote class="doxtable">
<p><b>TO-DO alumnos Version 4</b></p>
<p>âœ… 1. Call the function <code><a class="el" href="port__system_8h.html#a2dca6b2c8ee48c36828b323f42c47fc8" title="Resume Tick increment.">port_system_systick_resume()</a></code> to resume the systick timer at the beginning of the ISR <br  />
</p>
</blockquote>

</div>
</div>
<a id="ab5e09814056d617c521549e542639b7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e09814056d617c521549e542639b7e">&#9670;&nbsp;</a></span>SysTick_Handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SysTick_Handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt service routine for the System tick timer (SysTick). </p>
<dl class="section note"><dt>Note</dt><dd>This ISR is called when the SysTick timer generates an interrupt. The program flow jumps to this ISR and increments the tick counter by one millisecond.</dd></dl>
<blockquote class="doxtable">
<p>âœ… 1. <b>Increment the System tick counter <code>msTicks</code> in 1 count.</b> To do so, use the function <code><a class="el" href="port__system_8h.html#ab415270cfcefc90ed8b8842da4e3d4c6" title="Get the count of the System tick in milliseconds.">port_system_get_millis()</a></code> and <code><a class="el" href="port__system_8h.html#abb94f01f1901334f3df650392be23009" title="Sets the number of milliseconds since the system started.">port_system_set_millis()</a></code>. </p>
</blockquote>
<dl class="section warning"><dt>Warning</dt><dd><b>The variable <code>msTicks</code> must be declared volatile!</b> Just because it is modified by a call of an ISR, in order to avoid <a href="https://en.wikipedia.org/wiki/Race_condition"><em>race conditions</em></a> . <b>Added to the definition</b> after <em>static</em>. </dd></dl>

</div>
</div>
<a id="a38ad4725462bdc5e86c4ead4f04b9fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38ad4725462bdc5e86c4ead4f04b9fc2">&#9670;&nbsp;</a></span>TIM2_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TIM2_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function handles TIM2 global interrupt. </p>
<p>This timer is used to control the duration of the note. When the timer expires, it generates an interrupt. The code jumps to this ISR when the timer generates an interrupt.</p>
<blockquote class="doxtable">
<p><b>TO-DO alumnos</b></p>
<p>âœ… 1. Clear the interrupt flag of the status register <br  />
âœ… 2. Set the flag <code>note_end</code> to <code>true</code> of the corresponding buzzer <br  />
&#160;&#160;&#160;&#160;ðŸ’¡ As done with the buttons, you can get the specific buzzer from the array of buzzers <br  />
</p>
</blockquote>

</div>
</div>
<a id="a0d108a3468b2051548183ee5ca2158a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d108a3468b2051548183ee5ca2158a0">&#9670;&nbsp;</a></span>USART3_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USART3_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function handles USART3 global interrupt. </p>
<p>First, this function identifies the line/ pin which has raised the interruption. Then, perform the desired action. Before leaving it cleans the interrupt pending register.</p>
<p>The program flow jumps to this ISR when the USART3 generates an interrupt. It can be due to:</p><ul>
<li>Reception of a new byte (RXNE)</li>
<li>Transmission of a byte has finished (TC)</li>
<li>Transmission buffer is empty (TXE)</li>
</ul>
<blockquote class="doxtable">
<p><b>TO-DO alumnos Version 2</b></p>
<p>âœ… 1. Get the data if it has been received a new data. To do so, check that the RXNE flag is set and the RXNEIE bit is enabled. If so, call the function <code><a class="el" href="port__usart_8h.html#a886ec2f39f0f9e18dd62cfc8d2b563a7" title="Function to read the data from the USART Data Register and store it in the input buffer.">port_usart_store_data()</a></code> <br  />
âœ… 2. Store the data if there is new data to transmit. To do so, check that the TXE flag is set and the TXEIE bit is enabled. If so, call the function <code><a class="el" href="port__usart_8h.html#a726f80521212a7e8f3505f00e0ddf49f" title="Function to write the data from the output buffer to the USART Data Register.">port_usart_write_data()</a></code> <br  />
</p>
</blockquote>
<p><br  />
</p><blockquote class="doxtable">
<p><b>TO-DO alumnos Version 4</b></p>
<p>âœ… 1. Call the function <code><a class="el" href="port__system_8h.html#a2dca6b2c8ee48c36828b323f42c47fc8" title="Resume Tick increment.">port_system_systick_resume()</a></code> to resume the systick timer at the beginning of the ISR <br  />
</p>
</blockquote>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_651562d8bf6cfd3e81eff5b570d7df50.html">port</a></li><li class="navelem"><a class="el" href="dir_aff93352f483d815f4aad2ce8569e33b.html">stm32f4</a></li><li class="navelem"><a class="el" href="dir_96ea3e7ce74ccff9e7229beeb516906f.html">src</a></li><li class="navelem"><a class="el" href="interr_8c.html">interr.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
